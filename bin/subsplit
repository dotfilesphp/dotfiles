#!/usr/bin/env php
<?php

/*
 * This file is part of the dotfiles project.
 *
 * (c) Anthonius Munthi <me@itstoni.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was disstributed with this source code.
 */

require __DIR__.'/../vendor/autoload.php';

use Symfony\Component\Process\Process;

define('WORKDIR',realpath(__DIR__.'/../'));
define('SOURCE','git@github.com:kilip/dotfiles.git');

run();

function run(){
    if(!is_dir(WORKDIR.'/.subsplit')){
        runCommand('git subsplit init '.SOURCE);
    }
    runCommand('git subsplit update '.SOURCE);


}

function runCommand($command)
{
    $process = new Process($command,WORKDIR);
    $process->run(function($type,$buffer){
        if(Process::ERR === $type){
            echo "ERR >> $buffer\n";
        }else{
            echo "OUT >> $buffer\n";
        }
    });
}
